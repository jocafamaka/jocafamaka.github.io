<!-- 
	*	NagMap Reborn Live Preview
	*	Developed by: JoÃ£o Carlos Rodrigues Ribeiro
	*   24/09/2018 - 01:08:20
	*	See the project: https://github.com/jocafamaka/nagmapReborn
-->

<!DOCTYPE html> 
<html class="no-js"> 
<head> 
	<meta charset="utf-8"> 
	<title>NagMap Reborn - Live Preview</title>  
	<meta name="viewport" content="width=device-width,initial-scale=1">  
	<link rel="stylesheet" href="resources/style.css">
	<link rel="icon" href="resources/NagFavIcon.ico">
	<link rel="stylesheet" href="resources/sa/sweetalert2.min.css">
</head> 
<body class="flat">
	<div id="map_canvas"></div>
	<div class="content">	
		<div id="loader"></div>	
		<div class="content-box"> 
			<div class="big-content"> 
				<img src="resources/img/Live.png" class="logo" alt="Logo NagMap Reborn"> 
				<br>
				<a href="#" onclick="start();" class="btn green">START</a>
			</div> 
		</div> 
	</div>
	<script src="resources/js/jquery-slim.min.js"></script>  
	<script src="//maps.google.com/maps/api/js?key=AIzaSyC8XKG385ovMZEXE6h2jV5jyBp5QCovz8g" type="text/javascript"></script>
	<script type="text/javascript" id="cookieinfo" src="resources/cookies.js"></script>
	<script src="resources/sa/sweetalert2.all.min.js"></script>
	<script type="text/javascript">
		var icons, lines, type;

		window.map = new google.maps.Map(document.getElementById("map_canvas"),{
			zoom: 14,
			center: new google.maps.LatLng(-3.723186, -38.522053),
			zoomControl: false,
			mapTypeControl: false,
			scaleControl: false,
			streetViewControl: false,
			rotateControl: false,
			keyboardShortcuts: false,
			maxZoom: 14,
			minZoom: 14,
			gestureHandling: 'none',
			fullscreenControl: false,
			styles: [
			{
				featureType: "administrative",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "poi",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "water",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "road",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			}
			]
		});

		var panPath = [];   
		var panQueue = [];  
		var STEPS = 600;   

		function panTo(newLat, newLng) {
			if (panPath.length > 0) {
				panQueue.push([newLat, newLng]);
			} else {

				panPath.push("****");
				var curLat = map.getCenter().lat();
				var curLng = map.getCenter().lng();
				var dLat = (newLat - curLat)/STEPS;
				var dLng = (newLng - curLng)/STEPS;

				for (var i=0; i < STEPS; i++) {
					panPath.push([curLat + dLat * i, curLng + dLng * i]);
				}
				panPath.push([newLat, newLng]);
				panPath.shift();
				setTimeout(doPan, 20);
			}
		}

		function doPan() {
			var next = panPath.shift();
			if (next != null) {
				map.panTo( new google.maps.LatLng(next[0], next[1]));
				setTimeout(doPan, 20 );
			} else {
				var queued = panQueue.shift();
				if (queued != null) {
					panTo(queued[0], queued[1]);
				}
			}
		}

		panTo(-3.727894, -38.599586);
		panTo(-3.865957, -38.453139);
		panTo(-3.861874, -38.506926);
		panTo(-3.836712, -38.592030);
		panTo(-3.787341, -38.540527);
		panTo(-3.723186, -38.522053);

		var _paq = _paq || [];
		_paq.push(['trackPageView']);
		_paq.push(['enableLinkTracking']);
		(function() {
			var u="//nagmaprebornanalytics.000webhostapp.com/";
			_paq.push(['setTrackerUrl', u+'piwik.php']);
			_paq.push(['setSiteId', '1']);
			var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
			g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		})();

		function start(){

			swal({
				title: 'NagMap Reborn Live Preview!',
				text: 'This page allows you to preview some of the features and options of NagMap Reborn!',
				footer: '<a href="https://github.com/jocafamaka/nagmapReborn">Visit the project on GitHub</a>',
				confirmButtonText: 'Next'
			}).then(function(){
				swal({
					type: 'question',
					title: 'How it works?',
					text: 'From now on you will make some choices that will define the appearance of NagMap Reborn, so choose carefully.',
					footer: '<a href="https://github.com/jocafamaka/nagmapReborn">Visit the project on GitHub</a>',
					confirmButtonText: 'Begin'
				}).then(function(){questions();})
			});
		}

		function questions(){

			swal.mixin({
				input: 'radio',
				confirmButtonText: 'Next &rarr;',
				showCancelButton: false,
				progressSteps: ['1', '2', '3']
			}).queue([
			{
				title: 'Select the style of the icons!',
				inputOptions:{
					'0': '<img title="Retro" src="resources/img/icons/select/IconsStyle-1.png">',
					'1': '<img title="With shadow" src="resources/img/icons/select/IconsStyle-2.png">',
					'2': '<img title="With border" src="resources/img/icons/select/IconsStyle-3.png">',
				},
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				}
			},
			{
				title: 'Show line between parents?',
				inputOptions:{
					'1': '<img title="On" src="resources/img/lines/on.png">',
					'3': '<img title="Off" src="resources/img/lines/off.png">',
				},
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				}
			},
			{
				title: 'Select map type/style!',
				inputOptions:{
					'0': '<img title="Roadmap type" src="resources/img/styles/roadmap.png">',
					'1': '<img title="Satellite type" src="resources/img/styles/satellite.png"><br>',
					'2': '<img title="Terrain type" src="resources/img/styles/terrain.png">',
					'3': '<img title="Dark custom style" src="resources/img/styles/dark.png">',
				},
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				},
				confirmButtonText: 'Finish'
			}
			]).then((result) => {
				if (result.value) {
					var r = result.value;
					icons = r[0];
					lines = r[1];
					type = r[2];
					swal({
						type: 'success',
						title: 'All set up, let\'s go!',
						text: 'You will now be redirected to the page with the generated map.',
						confirmButtonText: 'GO'
					}).then(function(){
						go();
					})
				}
			})
		}

		function go(){
			setTimeout(function(){
				window.location.replace("live.html?icons="+icons+"&lines="+lines+"&type="+type);
			}, 1000);
			$('#loader').show().width(((window.innerWidth > window.innerHeight)? window.innerWidth : window.innerHeight) + 250).height(((window.innerWidth > window.innerHeight)? window.innerWidth : window.innerHeight) + 250);
		}

		$('.btn').prepend('<div class="hover"><span></span><span></span><span></span><span></span><span></span></div>');
	</script>

</body> 
</html>