<!-- 
	*	NagMap Reborn Live Preview
	*	Developed by: João Carlos Rodrigues Ribeiro
	*   24/09/2018 - 01:08:20
	*	See the project: https://github.com/jocafamaka/nagmapReborn
-->

<!DOCTYPE html> 
<html class="no-js"> 
<head> 
	<meta charset="utf-8"> 
	<title>NagMap Reborn - Live Preview</title>  
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<style type="text/css">
	#toast {visibility: hidden;max-width: 50px;height: 50px;/*margin-left: -125px;*/margin: auto;background-color: #2b8adc;color: #fff;text-align: center;border-radius: 2px;position: fixed;z-index: 1;left: 0;right:0;bottom: 30px;font-size: 17px;white-space: nowrap;}
	#toast #img{width: 50px;height: 50px;float: left;padding-top: 16px;padding-bottom: 16px;box-sizing: border-box;background-color: #2371b3;color: #fff;line-height:1;}
	#toast #desc{color: #fff;padding: 16px;overflow: hidden;white-space: nowrap;line-height: 1;}
	#toast.show {visibility: visible;-webkit-animation: fadein 0.5s, expand 0.5s 0.5s, stay 3s 1s, shrink 0.5s 2s, fadeout 0.5s 2.5s;animation: fadein 0.5s, expand 0.5s 0.5s,stay 3s 1s, shrink 0.5s 4s, fadeout 0.5s 4.5s;}@-webkit-keyframes fadein {from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;}}@keyframes fadein {from {bottom: 0; opacity: 0;}to {bottom: 30px; opacity: 1;}}@-webkit-keyframes expand {from {min-width: 50px} to {min-width: 350px}}@keyframes expand {from {min-width: 50px}to {min-width: 350px}}@-webkit-keyframes stay {from {min-width: 350px} to {min-width: 350px}}@keyframes stay {from {min-width: 350px}to {min-width: 350px}}@-webkit-keyframes shrink {from {min-width: 350px;} to {min-width: 50px;}}@keyframes shrink {from {min-width: 350px;} to {min-width: 50px;}}@-webkit-keyframes fadeout {from {bottom: 30px; opacity: 1;} to {bottom: 60px; opacity: 0;}}@keyframes fadeout {from {bottom: 30px; opacity: 1;}to {bottom: 60px; opacity: 0;}}
</style>
<link rel="stylesheet" href="resources/style.min.css">
<link rel="icon" href="resources/NagFavIcon.ico">
<link rel="stylesheet" href="resources/sa/sweetalert2.min.css">
<link rel="stylesheet" href="resources/bootstrap-slider.min.css">
</head> 
<body class="flat">
	<div id="map_canvas"></div>
	<div class="content">
		<a href="https://github.com/jocafamaka/nagmapReborn" title="Project on GitHub" target="_blank" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>	
		<div id="loader"></div>	
		<div class="content-box"> 
			<div class="big-content"> 
				<img src="resources/img/Live.png" class="logo" alt="Logo NagMap Reborn"> 
				<br>
				<a href="#" onclick="start();" class="btn green">START</a>
			</div> 
		</div> 
	</div>
	<div id="toast"><div id="img">INFO</div><div id="desc">Slow connection detected!</div></div>
	<script src="resources/js/jquery-slim.min.js"></script>  
	<script src="//maps.google.com/maps/api/js?key=AIzaSyC8XKG385ovMZEXE6h2jV5jyBp5QCovz8g" type="text/javascript"></script>
	<script type="text/javascript" id="cookieinfo" src="resources/cookies.js"></script>
	<script src="resources/sa/sweetalert2.all.min.js"></script>
	<script type="text/javascript" src="resources/js/bootstrap-slider.min.js"></script>  
	<script type="text/javascript">
		var icons, lines, type;
		var sizeBar = 25;
		var isSlow = false;

		function launch_toast() {
			var x = document.getElementById("toast")
			x.className = "show";
			setTimeout(function(){ x.className = x.className.replace("show", ""); }, 5000);
		};

		STEPS = 600;

		var slow = setTimeout(function() {
			STEPS = 800;
			isSlow = true;
			launch_toast();
		}, 5000);

		window.map = new google.maps.Map(document.getElementById("map_canvas"),{
			zoom: 14,
			center: new google.maps.LatLng(-3.723186, -38.522053),
			zoomControl: false,
			mapTypeControl: false,
			scaleControl: false,
			streetViewControl: false,
			rotateControl: false,
			keyboardShortcuts: false,
			maxZoom: 14,
			minZoom: 14,
			gestureHandling: 'none',
			fullscreenControl: false,
			styles: [
			{
				featureType: "administrative",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "poi",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "water",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			},{
				featureType: "road",
				elementType: "labels",
				stylers: [
				{ visibility: "off" }
				]
			}
			]
		});

		var tilesLoadedCount = 0;
		google.maps.event.addListener(map, 'tilesloaded', function() {
			tilesLoadedCount++;
			if (tilesLoadedCount == 1) {
				clearTimeout(slow);
				panTo(-3.727894, -38.599586);
				panTo(-3.865957, -38.453139);
				panTo(-3.861874, -38.506926);
				panTo(-3.836712, -38.592030);
				panTo(-3.787341, -38.540527);
				panTo(-3.723186, -38.522053);
			}
		});

		panPath = [];   
		panQueue = [];  

		function panTo(newLat, newLng) {
			if (panPath.length > 0) {
				panQueue.push([newLat, newLng]);
			} else {

				panPath.push("****");
				var curLat = map.getCenter().lat();
				var curLng = map.getCenter().lng();
				var dLat = (newLat - curLat)/STEPS;
				var dLng = (newLng - curLng)/STEPS;

				for (var i=0; i < STEPS; i++) {
					panPath.push([curLat + dLat * i, curLng + dLng * i]);
				}
				panPath.push([newLat, newLng]);
				panPath.shift();
				setTimeout(doPan, 20);
			}
		};

		function doPan() {
			var next = panPath.shift();
			if (next != null) {
				map.panTo( new google.maps.LatLng(next[0], next[1]));
				setTimeout(doPan, 20 );
			} else {
				var queued = panQueue.shift();
				if (queued != null) {
					panTo(queued[0], queued[1]);
				}
			}
		};

		function start(){

			swal({
				title: 'NagMap Reborn Live Preview!',
				text: 'This page allows you to preview some of the features and options of NagMap Reborn!',
				footer: '<a href="https://github.com/jocafamaka/nagmapReborn">Visit the project on GitHub</a>',
				confirmButtonText: 'Next'
			}).then(function(){
				swal({
					type: 'question',
					title: 'How it works?',
					text: 'From now on you will make some choices that will define the appearance of NagMap Reborn, so choose carefully.',
					footer: '<a href="https://github.com/jocafamaka/nagmapReborn">Visit the project on GitHub</a><img style="opacity:0;with:0px;height:0px" class="load" src="">',
					confirmButtonText: 'Begin'
				}).then(function(){questions();})
			});
		};

		function questions(){

			if(isSlow)
			{
				panPath = [];   
				panQueue = [];
			}

			swal.mixin({
				input: 'radio',
				confirmButtonText: 'Next &rarr;',
				showCancelButton: false,
				progressSteps: ['1', '2', '3', '4']
			}).queue([
			{
				title: 'Select the style of the icons!',
				inputOptions:{
					'0': '<img class="al62x43 load caption" title="Retro" data-caption="Retro" src="resources/img/icons/select/IconsStyle-1.png">',
					'1': '<img class="al62x43 load caption" title="With shadow" data-caption="With shadow" src="resources/img/icons/select/IconsStyle-2.png">',
					'2': '<img class="al62x43 load caption" title="With border" data-caption="With border" src="resources/img/icons/select/IconsStyle-3.png">',
				},
				footer: ' ',
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				},
				onBeforeOpen: function(){$('.caption').click(function(){$('.swal2-footer').text($(this).data('caption'));});}
			},
			{
				title: 'Show line between parents?',
				inputOptions:{
					'1': '<img class="al142x100 load caption" title="Show" data-caption="Show" src="resources/img/lines/on.png">',
					'3': '<img class="al142x100 load caption" title="Hide" data-caption="Hide" src="resources/img/lines/off.png">',
				},
				footer: ' ',
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				},
				onBeforeOpen: function(){$('.caption').click(function(){$('.swal2-footer').text($(this).data('caption'));});}
			},
			{
				title: 'ChangesBar size on screen!',
				html: '<br><div id="tudo"><input id="ex6" type="text" data-slider-min="25" data-slider-tooltip="hide" data-slider-max="50" data-slider-step="1" data-slider-value="25" data-slider-orientation="vertical"/><div id="view"><div id="sizeView"><img class="al122x122 load" src="resources/img/styles/roadmap.png"><div id="changesBarView"><div class="line down"></div><div class="line crit"></div><div class="line war"></div></div></div></div></div>',
				footer: '25%',
				onBeforeOpen: function(){sizeBar=25;$("#ex6").slider({reversed : true});$("#ex6").on("change", function(slideEvt){$("#changesBarView").height((sizeBar = slideEvt.value.newValue) + '%');$('.swal2-footer').text(slideEvt.value.newValue + "%")});}
			},
			{
				title: 'Select map type/style!',
				inputOptions:{
					'0': '<img class="al122x122 load caption" title="Roadmap type" data-caption="Roadmap" src="resources/img/styles/roadmap.png">',
					'1': '<img class="al122x122 load caption" title="Satellite type" data-caption="Satellite" src="resources/img/styles/satellite.png"><br>',
					'2': '<img class="al122x122 load caption" title="Terrain type" data-caption="Terrain" src="resources/img/styles/terrain.png">',
					'3': '<img class="al122x122 load caption" title="Dark custom style" data-caption="Dark custom style" src="resources/img/styles/dark.png">',
				},
				footer: ' ',
				inputValidator: (value) => {
					return !value && 'You need to choose something!'
				},
				confirmButtonText: 'Finish',
				onBeforeOpen: function(){$('.caption').click(function(){$('.swal2-footer').text($(this).data('caption'));});}
			}
			]).then((result) => {
				if (result.value) {
					var r = result.value;
					icons = r[0];
					lines = r[1];
					type = r[3];
					swal({
						type: 'success',
						title: 'All set up, let\'s go!',
						text: 'You will now be redirected to the page with the generated map.',
						confirmButtonText: 'GO'
					}).then(function(){
						go();
					})
				}
			})
		};

		function go(){
			setTimeout(function(){
				window.location.replace("live.html?icons="+icons+"&lines="+lines+"&type="+type+"&size="+sizeBar);
			}, 1000);
			$('#loader').show().width(((window.innerWidth > window.innerHeight)? window.innerWidth : window.innerHeight) + 250).height(((window.innerWidth > window.innerHeight)? window.innerWidth : window.innerHeight) + 250);
		}

		$('.btn').prepend('<div class="hover"><span></span><span></span><span></span><span></span><span></span></div>');

		var _paq = _paq || [];_paq.push(["setDocumentTitle", document.domain + "/" + document.title]);_paq.push(["setCookieDomain", "*.jocafamaka.github.io"]);_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u="//analytics.nagmapreborn.com/"; _paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', '1']);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();
	</script>

</body> 
</html>